import{r as m,j as s,H as j,L as u,z as i,a as b}from"./app-DiO4YTWd.js";import{A as N}from"./AdminLayout-BSmZjGOe.js";import{B as f}from"./Button-BsG5zIYg.js";import{A as v}from"./arrow-left-BxxvFU6z.js";import{M as y,P as w}from"./x-CCMz-52p.js";import{T as x}from"./truck-DjkUykOT.js";import{S as k}from"./shopping-bag-CtPxmjn5.js";import{C as S}from"./circle-alert-D55FHyAa.js";import{C as P}from"./circle-check-big-IrP5IU_V.js";import{C as D}from"./clock-keqBSmMu.js";import"./Badge-Ciu0XMlR.js";import"./createLucideIcon-BZC9d3V6.js";import"./users-BTyOlAby.js";import"./user-DA0weDVr.js";import"./chevron-right-DbzAQtlb.js";function G({order:e,items:o}){const[t,p]=m.useState(e.status),[c,r]=m.useState(!1),l=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),n=(a=>{const d={pending:{label:"Menunggu Pembayaran",color:"badge-warning",icon:D,bg:"bg-yellow-100",text:"text-yellow-600"},processing:{label:"Diproses",color:"badge-info",icon:w,bg:"bg-blue-100",text:"text-blue-600"},shipped:{label:"Dikirim",color:"badge-primary",icon:x,bg:"bg-pink-100",text:"text-pink-600"},delivered:{label:"Selesai",color:"badge-success",icon:P,bg:"bg-green-100",text:"text-green-600"},cancelled:{label:"Dibatalkan",color:"badge-error",icon:S,bg:"bg-red-100",text:"text-red-600"}};return d[a]||d.pending})(e.status),h=n.icon,g=()=>{if(t===e.status){i.info("Status tidak berubah");return}r(!0),b.put(route("admin.pesanan.updateStatus",e.id),{status:t},{onSuccess:()=>{i.success("Status pesanan berhasil diperbarui")},onError:()=>{i.error("Gagal memperbarui status")},onFinish:()=>{r(!1)}})};return s.jsxs(N,{children:[s.jsx(j,{title:"Detail Pesanan - Admin"}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx(u,{href:route("admin.pesanan.index"),className:"btn btn-ghost btn-circle",children:s.jsx(v,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Detail Pesanan"}),s.jsxs("p",{className:"text-gray-600",children:["#",e.id.slice(0,8).toUpperCase()]})]}),s.jsx("div",{className:`px-4 py-2 rounded-lg ${n.bg}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(h,{className:`w-5 h-5 ${n.text}`}),s.jsx("span",{className:`font-semibold ${n.text}`,children:n.label})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Informasi Pelanggan"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Nama"}),s.jsx("p",{className:"font-semibold",children:e.customer_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("p",{className:"font-semibold",children:e.customer_email})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Tanggal Pesanan"}),s.jsx("p",{className:"font-semibold",children:e.created_at})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[s.jsx(y,{className:"w-5 h-5 text-pink-500"}),"Alamat Pengiriman"]}),s.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:e.alamat}),e.kecamatan&&s.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-gray-500",children:[s.jsx(x,{className:"w-4 h-4"}),s.jsxs("span",{children:["Pengiriman ke ",e.kecamatan]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[s.jsx(k,{className:"w-5 h-5 text-pink-500"}),"Daftar Pesanan"]}),s.jsx("div",{className:"divide-y",children:o.map(a=>s.jsxs("div",{className:"flex gap-4 py-4 first:pt-0 last:pb-0",children:[s.jsx("img",{src:a.image,alt:a.name,className:"w-16 h-16 object-cover rounded-lg"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold",children:a.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[l(a.price)," x ",a.quantity]}),a.deskripsi&&s.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Catatan: ",a.deskripsi]})]}),s.jsx("div",{className:"text-right",children:s.jsx("p",{className:"font-bold text-pink-500",children:l(a.subtotal)})})]},a.id))})]})]}),s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Ringkasan Pembayaran"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal"}),s.jsx("span",{children:l(e.total_harga)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Ongkos Kirim"}),s.jsx("span",{children:l(e.ongkir)})]}),s.jsx("div",{className:"divider my-2"}),s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{className:"text-pink-500",children:l(e.total_pembayaran)})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Update Status"}),s.jsxs("select",{value:t,onChange:a=>p(a.target.value),className:"select select-bordered w-full mb-4",children:[s.jsx("option",{value:"pending",children:"Menunggu Pembayaran"}),s.jsx("option",{value:"processing",children:"Diproses"}),s.jsx("option",{value:"shipped",children:"Dikirim"}),s.jsx("option",{value:"delivered",children:"Selesai"}),s.jsx("option",{value:"cancelled",children:"Dibatalkan"})]}),s.jsx(f,{variant:"primary",className:"w-full",onClick:g,disabled:c||t===e.status,loading:c,children:"Update Status"}),t==="cancelled"&&e.status!=="cancelled"&&s.jsx("p",{className:"text-xs text-red-500 mt-2",children:"⚠️ Membatalkan pesanan akan mengembalikan stok produk"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Info Pesanan"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"ID Pesanan"}),s.jsx("span",{className:"font-mono",children:e.id.slice(0,8).toUpperCase()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Dibuat"}),s.jsx("span",{children:e.created_at})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Terakhir Update"}),s.jsx("span",{children:e.updated_at})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Snap Token"}),s.jsx("span",{className:"font-mono text-xs",children:e.snap_token?e.snap_token.slice(0,10)+"...":"-"})]})]})]})]})]})]})]})}export{G as default};
