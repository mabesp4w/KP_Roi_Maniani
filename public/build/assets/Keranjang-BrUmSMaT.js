import{r as j,j as s,H as f,L as a,a as p,z as i}from"./app-DclzIr9U.js";import{U as N}from"./UserLayout-jZqCqZ2q.js";import{B as g}from"./Button-DhhQn3HE.js";import{A as k}from"./arrow-left-kRrPDBCk.js";import{M as v}from"./minus-CnqAhJOi.js";import{P as y}from"./plus-D_52tXls.js";import{T as w}from"./trash-2-PaOfSQO4.js";import{S}from"./shopping-bag-u_3VaMlC.js";import{S as K}from"./x-CMYJuPTS.js";import"./cake-CvuR9Wrf.js";import"./createLucideIcon-D_Lqu3nq.js";import"./user-YSHcxOR2.js";import"./star-BbT2wrnT.js";import"./phone-C2k2HP--.js";import"./mail-DH6zG2aa.js";function T({items:c,total:o,totalItems:x}){const[n,h]=j.useState([]),[r,m]=j.useState([]),l=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),u=(e,t)=>{t<1||(h([...n,e]),p.put(route("keranjang.update",e),{kuantitas:t},{preserveScroll:!0,onSuccess:()=>{i.success("Keranjang diperbarui")},onError:d=>{i.error(d.error||"Gagal memperbarui keranjang")},onFinish:()=>{h(n.filter(d=>d!==e))}}))},b=e=>{m([...r,e]),p.delete(route("keranjang.destroy",e),{preserveScroll:!0,onSuccess:()=>{i.success("Produk dihapus dari keranjang")},onError:()=>{i.error("Gagal menghapus produk")},onFinish:()=>{m(r.filter(t=>t!==e))}})};return s.jsxs(N,{children:[s.jsx(f,{title:"Keranjang - Angel Cake'S"}),s.jsx("section",{className:"pt-28 pb-12 px-4 min-h-screen",children:s.jsxs("div",{className:"container mx-auto max-w-6xl",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx(a,{href:"/produk",className:"btn btn-ghost btn-circle",children:s.jsx(k,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Keranjang Belanja"}),s.jsxs("p",{className:"text-gray-600",children:[x," item dalam keranjang"]})]})]}),c.length>0?s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2 space-y-4",children:c.map(e=>s.jsx("div",{className:`bg-white rounded-2xl shadow-lg p-6 ${r.includes(e.id)?"opacity-50":""}`,children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx(a,{href:`/produk/${e.varian_produk_id}`,className:"flex-shrink-0",children:s.jsx("img",{src:e.image,alt:e.name,className:"w-24 h-24 object-cover rounded-lg"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs text-pink-500 font-semibold mb-1",children:e.category}),s.jsx(a,{href:`/produk/${e.varian_produk_id}`,className:"font-bold text-lg hover:text-pink-500 transition-colors line-clamp-2",children:e.name}),s.jsx("div",{className:"text-pink-500 font-bold mt-1",children:l(e.price)}),e.stock<10&&s.jsxs("div",{className:"text-xs text-orange-500 mt-1",children:["Stok tersisa: ",e.stock]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-4",children:[s.jsxs("div",{className:"flex items-center border rounded-lg",children:[s.jsx("button",{onClick:()=>u(e.id,e.quantity-1),className:"btn btn-ghost btn-xs",disabled:e.quantity<=1||n.includes(e.id),children:s.jsx(v,{className:"w-4 h-4"})}),s.jsx("span",{className:"w-10 text-center font-semibold",children:n.includes(e.id)?"...":e.quantity}),s.jsx("button",{onClick:()=>u(e.id,e.quantity+1),className:"btn btn-ghost btn-xs",disabled:e.quantity>=e.stock||n.includes(e.id),children:s.jsx(y,{className:"w-4 h-4"})})]}),s.jsxs("button",{onClick:()=>b(e.id),className:"btn btn-ghost btn-sm text-red-500 hover:bg-red-50",disabled:r.includes(e.id),children:[s.jsx(w,{className:"w-4 h-4"}),r.includes(e.id)?"Menghapus...":"Hapus"]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Subtotal"}),s.jsx("div",{className:"font-bold text-lg",children:l(e.subtotal)})]})]})]})},e.id))}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-28",children:[s.jsx("h2",{className:"text-xl font-bold mb-6",children:"Ringkasan Pesanan"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex justify-between text-gray-600",children:[s.jsxs("span",{children:["Subtotal (",x," item)"]}),s.jsx("span",{children:l(o)})]}),s.jsxs("div",{className:"flex justify-between text-gray-600",children:[s.jsx("span",{children:"Ongkos Kirim"}),s.jsx("span",{className:"text-sm",children:"Dihitung saat checkout"})]}),s.jsx("div",{className:"divider my-2"}),s.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{className:"text-pink-500",children:l(o)})]})]}),s.jsx(a,{href:"/checkout",className:"w-full",children:s.jsxs(g,{variant:"primary",className:"w-full",disabled:c.length===0,children:[s.jsx(S,{className:"w-5 h-5 mr-2"}),"Checkout"]})}),s.jsx(a,{href:"/produk",className:"btn btn-outline w-full mt-3",children:"Lanjut Belanja"})]})})]}):s.jsxs("div",{className:"text-center py-20",children:[s.jsx("div",{className:"w-24 h-24 mx-auto bg-gray-100 rounded-full flex items-center justify-center mb-6",children:s.jsx(K,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Keranjang Kosong"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Anda belum menambahkan produk ke keranjang"}),s.jsx(a,{href:"/produk",children:s.jsx(g,{variant:"primary",children:"Mulai Belanja"})})]})]})})]})}export{T as default};
