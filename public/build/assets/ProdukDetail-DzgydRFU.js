import{u as A,r as l,j as e,H as B,L as c,z as d,a as h}from"./app-DT32C7nY.js";import{U as H,H as R,S as U}from"./UserLayout-RTAU9vEL.js";import{B as q}from"./Button-DkoYT9R8.js";import{C as z,a as K}from"./chevron-right-bjn_y0tR.js";import{M as G}from"./minus-DCU0TD5p.js";import{P as J}from"./plus-K_uxNSFF.js";import{S as Q}from"./x-CHumAv0e.js";import{c as T}from"./createLucideIcon-CMnZVN2_.js";import{M as P}from"./message-circle-BGeXQBAF.js";import{U as V}from"./user-DeY8Ogeh.js";import"./cake-CAqAkV2S.js";import"./phone-D3b-d1Th.js";import"./mail--kKUj2iP.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],g=T("check",O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Y=T("share-2",X);function xe({product:a,otherVariants:f,relatedProducts:N}){const{auth:o}=A().props,[k,j]=l.useState(0),[i,b]=l.useState(1),[p,v]=l.useState(!1),[r,w]=l.useState(!1),[m,y]=l.useState(!1),[S,D]=l.useState([]),[x,F]=l.useState({total:0,average:0}),[W,_]=l.useState(!0),u=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),C=s=>{s==="increase"&&i<a.stock?b(i+1):s==="decrease"&&i>1&&b(i-1)},E=()=>{j(s=>(s+1)%a.images.length)},L=()=>{j(s=>(s-1+a.images.length)%a.images.length)},M=()=>{if(!o?.user){d.error("Silakan login terlebih dahulu"),h.visit(route("login"));return}v(!0),h.post(route("keranjang.store"),{varian_produk_id:a.id,kuantitas:i},{preserveScroll:!0,onSuccess:()=>{d.success("Produk berhasil ditambahkan ke keranjang"),b(1)},onError:s=>{d.error(s.error||"Gagal menambahkan ke keranjang")},onFinish:()=>{v(!1)}})};l.useEffect(()=>{(async()=>{if(o?.user)try{const n=await(await fetch(`/api/wishlist/check/${a.id}`)).json();w(n.inWishlist)}catch(t){console.error("Failed to check wishlist:",t)}})()},[o,a.id]),l.useEffect(()=>{(async()=>{_(!0);try{const n=await(await fetch(`/api/produk/${a.id}/reviews`)).json();D(n.reviews||[]),F(n.stats||{total:0,average:0})}catch(t){console.error("Failed to fetch reviews:",t)}finally{_(!1)}})()},[a.id]);const $=(s,t="w-4 h-4")=>e.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(n=>e.jsx(U,{className:`${t} ${n<=s?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},n))}),I=()=>{if(!o?.user){d.error("Silakan login terlebih dahulu"),h.visit(route("login"));return}y(!0),h.post(route("wishlist.toggle"),{varian_produk_id:a.id},{preserveScroll:!0,onSuccess:()=>{w(!r),d.success(r?"Dihapus dari wishlist":"Ditambahkan ke wishlist")},onError:()=>{d.error("Gagal mengubah wishlist")},onFinish:()=>{y(!1)}})};return e.jsxs(H,{children:[e.jsx(B,{title:`${a.full_name} - Angel Cake'S`}),e.jsx("section",{className:"pt-28 pb-4 px-4",children:e.jsx("div",{className:"container mx-auto",children:e.jsx("nav",{className:"text-sm",children:e.jsxs("ol",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("li",{children:e.jsx(c,{href:"/",className:"hover:text-pink-500",children:"Beranda"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(c,{href:"/produk",className:"hover:text-pink-500",children:"Produk"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(c,{href:`/produk?kategori_id=${a.category_id}`,className:"hover:text-pink-500",children:a.category})}),e.jsx("li",{children:"/"}),e.jsx("li",{className:"text-pink-500 font-medium truncate max-w-[200px]",children:a.full_name})]})})})}),e.jsx("section",{className:"pb-12 px-4",children:e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative bg-white rounded-2xl overflow-hidden shadow-lg mb-4",children:[e.jsx("img",{src:a.images[k],alt:a.full_name,className:"w-full h-[400px] lg:h-[500px] object-cover",onError:s=>{s.target.src="https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=800&h=800&fit=crop"}}),a.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:L,className:"absolute left-4 top-1/2 -translate-y-1/2 btn btn-circle btn-sm bg-white/90 hover:bg-white border-none",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsx("button",{onClick:E,className:"absolute right-4 top-1/2 -translate-y-1/2 btn btn-circle btn-sm bg-white/90 hover:bg-white border-none",children:e.jsx(K,{className:"w-5 h-5"})})]}),a.stock>0?e.jsx("div",{className:"absolute top-4 left-4 bg-green-500/90 backdrop-blur-sm px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-white font-semibold text-sm",children:["Stok: ",a.stock]})}):e.jsx("div",{className:"absolute top-4 left-4 bg-red-500/90 backdrop-blur-sm px-3 py-1 rounded-full",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:"Habis"})}),e.jsx("button",{onClick:I,disabled:m,className:`absolute top-4 right-4 btn btn-circle btn-sm border-none transition-all ${r?"bg-pink-500 hover:bg-pink-600":"bg-white/90 hover:bg-white"}`,children:m?e.jsx("span",{className:"loading loading-spinner loading-xs"}):e.jsx(R,{className:`w-4 h-4 ${r?"text-white fill-current":"text-pink-500"}`})})]}),a.images.length>1&&e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2",children:a.images.map((s,t)=>e.jsx("button",{onClick:()=>j(t),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${k===t?"border-pink-500 shadow-lg":"border-transparent hover:border-gray-300"}`,children:e.jsx("img",{src:s,alt:`${a.full_name} - ${t+1}`,className:"w-full h-full object-cover"})},t))})]}),e.jsxs("div",{children:[e.jsx(c,{href:`/produk?kategori_id=${a.category_id}`,className:"inline-block text-sm text-pink-500 font-semibold mb-2 hover:text-pink-600",children:a.category}),e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold mb-2",children:a.name}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:a.variant_name}),e.jsx("div",{className:"text-4xl font-bold text-pink-500 mb-6",children:u(a.price)}),a.attribute&&e.jsxs("div",{className:"mb-6",children:[e.jsx("span",{className:"text-gray-600",children:"Varian:"}),e.jsx("span",{className:"ml-2 font-semibold",children:a.attribute})]}),f.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Varian lainnya:"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:f.map(s=>e.jsxs(c,{href:`/produk/${s.id}`,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-pink-100 rounded-lg transition-colors",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-8 h-8 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:u(s.price)})]})]},s.id))})]}),a.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Deskripsi"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:a.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Jumlah:"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center border rounded-lg",children:[e.jsx("button",{onClick:()=>C("decrease"),className:"btn btn-ghost btn-sm",disabled:i<=1,children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-12 text-center font-semibold",children:i}),e.jsx("button",{onClick:()=>C("increase"),className:"btn btn-ghost btn-sm",disabled:i>=a.stock||a.stock===0,children:e.jsx(J,{className:"w-4 h-4"})})]}),a.stock>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:["Tersedia ",a.stock," item"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[e.jsxs(q,{variant:"primary",className:"flex-1 min-w-[200px]",disabled:a.stock===0||p,onClick:M,loading:p,children:[e.jsx(Q,{className:"w-5 h-5 mr-2"}),p?"Menambahkan...":"Tambah ke Keranjang"]}),e.jsx("button",{onClick:I,disabled:m,className:`btn rounded-lg ${r?"btn-primary":"btn-outline"}`,children:m?e.jsx("span",{className:"loading loading-spinner loading-xs"}):e.jsx(R,{className:`w-5 h-5 ${r?"fill-current":""}`})}),e.jsx("button",{className:"btn btn-outline rounded-lg",children:e.jsx(Y,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Kualitas Terjamin"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bahan premium"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Fresh Baked"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Dipanggang segar"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Pengiriman Cepat"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Same day delivery"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-pink-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Kemasan Aman"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Packaging premium"})]})]})]})})]})]})})}),e.jsx("section",{className:"py-12 px-4 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"w-6 h-6 text-pink-500"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Ulasan Produk"})]}),x.total>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[$(Math.round(x.average),"w-5 h-5"),e.jsx("span",{className:"font-bold text-lg",children:x.average}),e.jsxs("span",{className:"text-gray-500",children:["(",x.total," ulasan)"]})]})]}),W?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-pink-500"})}):S.length>0?e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:S.map(s=>e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(V,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:s.user_name}),e.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-2",children:s.created_at})]}),e.jsx("div",{className:"mb-3",children:$(s.rating)}),s.komentar&&e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:s.komentar})]})]})},s.id))}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl",children:[e.jsx(P,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Belum Ada Ulasan"}),e.jsx("p",{className:"text-gray-400",children:"Jadilah yang pertama memberikan ulasan untuk produk ini"})]})]})}),N.length>0&&e.jsx("section",{className:"py-12 px-4 bg-white",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-8","data-aos":"fade-up","data-aos-once":"true",children:"Produk Serupa"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:N.map((s,t)=>e.jsxs(c,{href:`/produk/${s.id}`,className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300","data-aos":"zoom-in","data-aos-delay":t*100,"data-aos-once":"true",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500"}),s.stock>0?e.jsx("div",{className:"absolute bottom-3 left-3 bg-green-500/90 backdrop-blur-sm px-2 py-0.5 rounded-full",children:e.jsxs("span",{className:"text-white font-semibold text-xs",children:["Stok: ",s.stock]})}):e.jsx("div",{className:"absolute bottom-3 left-3 bg-red-500/90 backdrop-blur-sm px-2 py-0.5 rounded-full",children:e.jsx("span",{className:"text-white font-semibold text-xs",children:"Habis"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-xs text-pink-500 font-semibold mb-1",children:s.category}),e.jsx("h3",{className:"font-bold mb-2 line-clamp-2",children:s.name}),e.jsx("p",{className:"text-lg font-bold text-pink-500",children:u(s.price)})]})]},s.id))})]})})]})}export{xe as default};
