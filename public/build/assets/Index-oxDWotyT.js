import{j as a,b as B,r as c,z as r,u as P,H as $,a as k}from"./app-DclzIr9U.js";import{M as z,S as H,T as F,A as I,C as R}from"./Table-Eg4sOQPD.js";import{B as v}from"./Button-DhhQn3HE.js";import{B as q}from"./Badge-Bu-XTxCl.js";import{C as D,a as E,b as L,c as U}from"./Card-D4Gc0qI0.js";import{P as G}from"./Pagination-DAv9-MYQ.js";import{A as J}from"./AdminLayout-5SeuCWsQ.js";import{P as Q}from"./plus-D_52tXls.js";import"./eye-NDUWHKck.js";import"./createLucideIcon-D_Lqu3nq.js";import"./trash-2-PaOfSQO4.js";import"./chevron-right-CvYWytKj.js";import"./users-ClF-wQTt.js";import"./x-CMYJuPTS.js";import"./user-YSHcxOR2.js";function V({label:l,type:d="text",name:e,value:o,onChange:h,error:p,placeholder:i="",className:x="",required:j=!1,autoFocus:m=!1,disabled:g=!1,...u}){return a.jsxs("div",{className:`form-control w-full ${x}`.trim(),children:[l&&a.jsx("label",{className:"label",htmlFor:e,children:a.jsxs("span",{className:"label-text",children:[l,j&&a.jsx("span",{className:"text-error",children:" *"})]})}),a.jsx("input",{type:d,id:e,name:e,value:o,onChange:h,placeholder:i,disabled:g,autoFocus:m,className:`input input-bordered w-full ${p?"input-error":""}`.trim(),...u}),p&&a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text-alt text-error",children:p})})]})}function _({isOpen:l,onClose:d,kecamatan:e=null,onSuccess:o}){const h=!!e,{data:p,setData:i,post:x,put:j,processing:m,errors:g,reset:u}=B({nama_kecamatan:""});c.useEffect(()=>{e?i("nama_kecamatan",e.nama_kecamatan):i("nama_kecamatan","")},[e,i]);const S=f=>{f.preventDefault(),h?j(`/admin/kecamatan/${e.id}`,{onSuccess:()=>{d(),u(),o&&o()},onError:t=>{t.message?r.error(t.message):Object.values(t).length>0?r.error(Object.values(t)[0]):r.error("Terjadi kesalahan saat mengubah kecamatan")}}):x("/admin/kecamatan",{onSuccess:()=>{d(),u(),o&&o()},onError:t=>{t.message?r.error(t.message):Object.values(t).length>0?r.error(Object.values(t)[0]):r.error("Terjadi kesalahan saat menambah kecamatan")}})},b=()=>{u(),d()};return a.jsx(z,{id:"modal-kecamatan",isOpen:l,onClose:b,size:"md",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:h?"Edit Kecamatan":"Tambah Kecamatan"}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsx(V,{label:"Nama Kecamatan",name:"nama_kecamatan",value:p.nama_kecamatan,onChange:f=>i("nama_kecamatan",f.target.value),error:g.nama_kecamatan,placeholder:"Contoh: Kecamatan Example",required:!0,autoFocus:!0}),a.jsx("div",{className:"text-sm text-base-content/60",children:a.jsx("p",{children:"Catatan: Nama kecamatan harus unik dan tidak boleh sama dengan kecamatan lain yang sudah ada."})}),a.jsxs("div",{className:"modal-action",children:[a.jsx(v,{variant:"outline",type:"button",onClick:b,disabled:m,children:"Batal"}),a.jsx(v,{variant:"primary",type:"submit",disabled:m,children:m?"Menyimpan...":h?"Simpan Perubahan":"Simpan"})]})]})]})})}function ma({kecamatan:l,filters:d}){const{props:e}=P();e.auth;const[o,h]=c.useState(d.search||""),[p,i]=c.useState(!1),[x,j]=c.useState(null),[m,g]=c.useState(d.sort||"nama_kecamatan"),[u,S]=c.useState(d.direction||"asc"),[b,f]=c.useState(!1),[t,C]=c.useState(!1),[K,N]=c.useState(null);c.useEffect(()=>{e.success&&r.success(e.success),e.error&&r.error(e.error)},[e.success,e.error]);const T=s=>{s.preventDefault(),k.get(route("admin.kecamatan.index"),{search:o,sort:m,direction:u},{preserveState:!0,preserveScroll:!0})},w=s=>{const n=m===s&&u==="asc"?"desc":"asc";g(s),S(n),k.get(route("admin.kecamatan.index"),{search:o,sort:s,direction:n},{preserveState:!0,preserveScroll:!0})},M=s=>{j(s),i(!0)},O=()=>{if(x){const s=`/admin/kecamatan/${x.id}`;k.delete(s,{preserveScroll:!0,onSuccess:n=>{i(!1),j(null)},onError:n=>{console.error("Delete error:",n),n.message?r.error(n.message):Object.values(n).length>0?r.error(Object.values(n)[0]):r.error("Terjadi kesalahan saat menghapus kecamatan")}})}},A=s=>{N(s),C(!0)},y=()=>{C(!1),N(null)};return a.jsxs(J,{auth:e.auth,header:"Data Kecamatan",children:[a.jsx($,{title:"Data Kecamatan"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(D,{"data-aos":"fade-down",children:a.jsx(E,{children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx(H,{value:o,onChange:h,onSubmit:T,placeholder:"Cari kecamatan...",className:"flex-1"}),a.jsxs(v,{variant:"primary",className:"gap-2",onClick:()=>f(!0),children:[a.jsx(Q,{size:18}),"Tambah Kecamatan"]})]})})}),a.jsxs(D,{"data-aos":"fade-up","data-aos-delay":"100",children:[a.jsx(L,{children:a.jsxs(U,{children:["Daftar Kecamatan (",l.total,")"]})}),a.jsx(E,{className:"p-0",children:a.jsx(F,{headers:[{label:"No",key:"no",sortable:!1},{label:"Nama Kecamatan",key:"nama_kecamatan",sortable:!0},{label:"Ongkir",key:"ongkir",sortable:!1},{label:"Aksi",key:"aksi",sortable:!1}],data:l.data,renderRow:(s,n)=>a.jsxs("tr",{children:[a.jsx("td",{children:(l.current_page-1)*l.per_page+n+1}),a.jsx("td",{children:s.nama_kecamatan}),a.jsx("td",{children:a.jsxs(q,{variant:"info",children:[s.ongkir_count||0," ongkir"]})}),a.jsx("td",{children:a.jsx(I,{onEdit:()=>A(s),onDelete:()=>M(s)})})]},s.id),emptyMessage:"Tidak ada data kecamatan",emptyColSpan:4,sortConfig:{key:m,direction:u},onSort:w})})]}),a.jsx(G,{links:l.links})]}),a.jsx(_,{isOpen:b,onClose:()=>f(!1),onSuccess:()=>{f(!1),k.reload()}}),a.jsx(_,{isOpen:t,onClose:y,kecamatan:K,onSuccess:()=>{y(),k.reload()}}),a.jsx(R,{isOpen:p,onClose:()=>i(!1),onConfirm:O,title:"Hapus Kecamatan",message:`Apakah Anda yakin ingin menghapus kecamatan "${x?.nama_kecamatan}"?`})]})}export{ma as default};
