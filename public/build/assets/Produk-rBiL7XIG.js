import{u as P,r,j as e,H as D,L as y,a as d,z as x}from"./app-DiO4YTWd.js";import{P as H}from"./Pagination-qYbOjDif.js";import{U as $,H as z}from"./UserLayout-DDjcgn2b.js";import{S}from"./search-k0OOWXqx.js";import{X as f,S as A}from"./x-CCMz-52p.js";import{c as L}from"./createLucideIcon-BZC9d3V6.js";import"./chevron-right-DbzAQtlb.js";import"./cake-D-Nn5PFn.js";import"./user-DA0weDVr.js";import"./star-BF6it9J2.js";import"./phone-CIL9TIeP.js";import"./mail-ajP4JZY8.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],K=L("funnel",E);function Q({products:o,categories:j,filters:k}){const{auth:u}=P().props,[n,b]=r.useState(k.search||""),[l,N]=r.useState(k.kategori_id||""),[C,i]=r.useState(!1),[c,p]=r.useState([]),[m,v]=r.useState([]),F=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),w=s=>{s.preventDefault(),d.get("/produk",{search:n,kategori_id:l},{preserveState:!0,preserveScroll:!0})},h=s=>{N(s),d.get("/produk",{search:n,kategori_id:s},{preserveState:!0,preserveScroll:!0})},g=()=>{b(""),N(""),d.get("/produk",{},{preserveState:!0,preserveScroll:!0})};r.useEffect(()=>{(async()=>{if(u?.user)try{const a=await(await fetch("/api/wishlist/ids")).json();p(a.ids||[])}catch(t){console.error("Failed to fetch wishlist:",t)}})()},[u]);const _=(s,t)=>{if(s.preventDefault(),s.stopPropagation(),!u?.user){x.error("Silakan login terlebih dahulu"),d.visit(route("login"));return}v([...m,t]),d.post(route("wishlist.toggle"),{varian_produk_id:t},{preserveScroll:!0,onSuccess:()=>{c.includes(t)?(p(c.filter(a=>a!==t)),x.success("Dihapus dari wishlist")):(p([...c,t]),x.success("Ditambahkan ke wishlist"))},onError:()=>{x.error("Gagal mengubah wishlist")},onFinish:()=>{v(m.filter(a=>a!==t))}})};return e.jsxs($,{children:[e.jsx(D,{title:"Produk - Angel Cake'S"}),e.jsx("section",{className:"pt-32 pb-12 px-4",children:e.jsxs("div",{className:"container mx-auto text-center","data-aos":"fade-down",children:[e.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Semua ",e.jsx("span",{className:"bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Produk Kami"})]}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Temukan kue favorit Anda dari koleksi lengkap kami"})]})}),e.jsx("section",{className:"pb-20 px-4",children:e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg sticky top-24","data-aos":"fade-right",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Filter"}),e.jsx("form",{onSubmit:w,className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n,onChange:s=>b(s.target.value),placeholder:"Cari produk...",className:"input input-bordered w-full pr-10"}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(S,{className:"w-5 h-5 text-gray-400"})})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Kategori"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>h(""),className:`w-full text-left px-4 py-2 rounded-lg transition-colors ${l?"hover:bg-gray-100":"bg-pink-500 text-white"}`,children:"Semua Kategori"}),j.map(s=>e.jsxs("button",{onClick:()=>h(s.id),className:`w-full text-left px-4 py-2 rounded-lg transition-colors ${l==s.id?"bg-pink-500 text-white":"hover:bg-gray-100"}`,children:[s.nama_kategori," (",s.produks_count,")"]},s.id))]})]}),(n||l)&&e.jsxs("button",{onClick:g,className:"btn btn-outline btn-sm w-full mt-6",children:[e.jsx(f,{className:"w-4 h-4"}),"Hapus Filter"]})]})}),e.jsx("button",{onClick:()=>i(!0),className:"lg:hidden fixed bottom-6 right-6 z-40 btn btn-primary btn-circle btn-lg shadow-xl",children:e.jsx(K,{className:"w-6 h-6"})}),C&&e.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-black/50",onClick:()=>i(!1),children:e.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-80 bg-white p-6 overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Filter"}),e.jsx("button",{onClick:()=>i(!1),className:"btn btn-circle btn-sm btn-ghost",children:e.jsx(f,{className:"w-5 h-5"})})]}),e.jsx("form",{onSubmit:s=>{w(s),i(!1)},className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n,onChange:s=>b(s.target.value),placeholder:"Cari produk...",className:"input input-bordered w-full pr-10"}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(S,{className:"w-5 h-5 text-gray-400"})})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Kategori"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>{h(""),i(!1)},className:`w-full text-left px-4 py-2 rounded-lg transition-colors ${l?"hover:bg-gray-100":"bg-pink-500 text-white"}`,children:"Semua Kategori"}),j.map(s=>e.jsxs("button",{onClick:()=>{h(s.id),i(!1)},className:`w-full text-left px-4 py-2 rounded-lg transition-colors ${l==s.id?"bg-pink-500 text-white":"hover:bg-gray-100"}`,children:[s.nama_kategori," (",s.produks_count,")"]},s.id))]})]}),(n||l)&&e.jsxs("button",{onClick:()=>{g(),i(!1)},className:"btn btn-outline btn-sm w-full mt-6",children:[e.jsx(f,{className:"w-4 h-4"}),"Hapus Filter"]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between","data-aos":"fade-left",children:e.jsxs("p",{className:"text-gray-600",children:["Menampilkan ",e.jsx("span",{className:"font-semibold",children:o.data.length})," dari ",e.jsx("span",{className:"font-semibold",children:o.total})," produk"]})}),o.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:o.data.map((s,t)=>e.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300","data-aos":"zoom-in","data-aos-delay":t*50,children:[e.jsxs(y,{href:`/produk/${s.id}`,className:"block relative overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-64 object-cover group-hover:scale-110 transition-transform duration-500",onError:a=>{a.target.src="https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=400&h=400&fit=crop"}}),e.jsx("div",{className:"absolute top-4 right-4",onClick:a=>a.stopPropagation(),children:e.jsx("button",{onClick:a=>_(a,s.id),disabled:m.includes(s.id),className:`btn btn-circle btn-sm border-none transition-all ${c.includes(s.id)?"bg-pink-500 hover:bg-pink-600":"bg-white/90 hover:bg-white"}`,children:m.includes(s.id)?e.jsx("span",{className:"loading loading-spinner loading-xs"}):e.jsx(z,{className:`w-4 h-4 ${c.includes(s.id)?"text-white fill-current":"text-pink-500"}`})})}),s.stock>0?e.jsx("div",{className:"absolute bottom-4 left-4 bg-green-500/90 backdrop-blur-sm px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-white font-semibold text-sm",children:["Stok: ",s.stock]})}):e.jsx("div",{className:"absolute bottom-4 left-4 bg-red-500/90 backdrop-blur-sm px-3 py-1 rounded-full",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:"Habis"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"text-xs text-pink-500 font-semibold mb-2",children:s.category}),e.jsx(y,{href:`/produk/${s.id}`,children:e.jsx("h3",{className:"text-lg font-bold mb-2 line-clamp-2 hover:text-pink-500 transition-colors",children:s.name})}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-2xl font-bold text-pink-500",children:F(s.price)}),e.jsxs("button",{className:"btn btn-primary btn-sm rounded-full gap-2",disabled:s.stock===0,children:[e.jsx(A,{className:"w-4 h-4"}),"Pesan"]})]})]})]},s.id))}),e.jsx("div",{"data-aos":"fade-up",children:e.jsx(H,{links:o.links})})]}):e.jsxs("div",{className:"text-center py-20","data-aos":"fade-up",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üîç"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Produk Tidak Ditemukan"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Coba ubah filter atau kata kunci pencarian Anda"}),e.jsx("button",{onClick:g,className:"btn btn-primary",children:"Lihat Semua Produk"})]})]})]})})})]})}export{Q as default};
