import{r as o,j as e,H as b,L as h,z as c,a as N}from"./app-DiO4YTWd.js";import{U as v}from"./UserLayout-DDjcgn2b.js";import{B as k}from"./Button-BsG5zIYg.js";import{A as y}from"./arrow-left-BxxvFU6z.js";import{c as w}from"./createLucideIcon-BZC9d3V6.js";import{S}from"./star-BF6it9J2.js";import"./cake-D-Nn5PFn.js";import"./x-CCMz-52p.js";import"./user-DA0weDVr.js";import"./phone-CIL9TIeP.js";import"./mail-ajP4JZY8.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_=w("send",B);function P({pesanan:l,items:m}){const[r,p]=o.useState(m.map(a=>({varian_produk_id:a.varian_produk_id,rating:5,komentar:""}))),[d,x]=o.useState(!1),u=(a,s,t)=>{p(i=>{const n=[...i];return n[a]={...n[a],[s]:t},n})},g=a=>{if(a.preventDefault(),r.some(t=>t.rating<1)){c.error("Mohon berikan rating untuk semua produk");return}x(!0),N.post(route("ulasan.store"),{pesanan_id:l.id,reviews:r},{onSuccess:()=>{c.success("Ulasan berhasil dikirim!")},onError:()=>{c.error("Gagal mengirim ulasan")},onFinish:()=>{x(!1)}})},j=({rating:a,onChange:s})=>{const[t,i]=o.useState(0);return e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>e.jsx("button",{type:"button",onClick:()=>s(n),onMouseEnter:()=>i(n),onMouseLeave:()=>i(0),className:"transition-transform hover:scale-110",children:e.jsx(S,{className:`w-8 h-8 ${n<=(t||a)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},n))})},f=a=>({1:"Sangat Buruk",2:"Buruk",3:"Cukup",4:"Bagus",5:"Sangat Bagus"})[a]||"";return e.jsxs(v,{children:[e.jsx(b,{title:"Beri Ulasan - Angel Cake'S"}),e.jsx("section",{className:"pt-28 pb-12 px-4 min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container mx-auto max-w-3xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(h,{href:route("pesanan.detail",l.id),className:"btn btn-ghost btn-circle",children:e.jsx(y,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Beri Ulasan"}),e.jsxs("p",{className:"text-gray-600",children:["Pesanan #",l.id.slice(0,8).toUpperCase()," - ",l.created_at]})]})]}),e.jsxs("form",{onSubmit:g,children:[e.jsx("div",{className:"space-y-6",children:m.map((a,s)=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-20 h-20 object-cover rounded-lg"}),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:"font-bold text-lg",children:a.name})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Rating Produk"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{rating:r[s].rating,onChange:t=>u(s,"rating",t)}),e.jsx("span",{className:`text-sm font-semibold ${r[s].rating>=4?"text-green-500":r[s].rating>=3?"text-yellow-500":"text-red-500"}`,children:f(r[s].rating)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Komentar (Opsional)"})}),e.jsx("textarea",{value:r[s].komentar,onChange:t=>u(s,"komentar",t.target.value),placeholder:"Bagikan pengalaman Anda dengan produk ini...",className:"textarea textarea-bordered w-full h-24",maxLength:500}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[r[s].komentar.length,"/500 karakter"]})]})]},a.id))}),e.jsxs("div",{className:"mt-8 flex gap-4",children:[e.jsx(h,{href:route("pesanan.detail",l.id),className:"btn btn-outline flex-1",children:"Batal"}),e.jsxs(k,{type:"submit",variant:"primary",className:"flex-1",loading:d,disabled:d,children:[e.jsx(_,{className:"w-5 h-5 mr-2"}),"Kirim Ulasan"]})]})]})]})})]})}export{P as default};
