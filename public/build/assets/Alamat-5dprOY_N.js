import{r as i,b as L,j as a,H as R,L as G,z as s,a as w}from"./app-DiO4YTWd.js";import{U}from"./UserLayout-DDjcgn2b.js";import{B as p}from"./Button-BsG5zIYg.js";import{T as y}from"./TextInput-Dk34ouGy.js";import{A as $}from"./arrow-left-BxxvFU6z.js";import{M as _,X as z}from"./x-CCMz-52p.js";import{P as A}from"./plus-zM8o0Y-5.js";import{S}from"./star-BF6it9J2.js";import{T as q}from"./truck-DjkUykOT.js";import{P as H}from"./pen-C88vJiHu.js";import{T as J}from"./trash-2-Z6dWABqx.js";import"./cake-D-Nn5PFn.js";import"./createLucideIcon-BZC9d3V6.js";import"./user-DA0weDVr.js";import"./phone-CIL9TIeP.js";import"./mail-ajP4JZY8.js";import"./eye-Be8_HVQe.js";function oa({addresses:b,kecamatanOptions:C,ongkirOptions:d}){const[T,x]=i.useState(!1),[m,h]=i.useState(null),[g,f]=i.useState(null),[r,c]=i.useState(""),{data:l,setData:n,post:K,put:M,processing:j,errors:t,reset:N}=L({nama_pengguna:"",nomor_telepon:"",alamat:"",ongkir_id:"",aktif:!1}),u=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),P=i.useMemo(()=>r?d.filter(e=>e.kecamatan_id===r):[],[r,d]),k=()=>{N(),c(""),h(null),x(!0)},D=e=>{c(e.kecamatan_id||""),n({nama_pengguna:e.nama_pengguna,nomor_telepon:e.nomor_telepon,alamat:e.alamat,ongkir_id:e.ongkir_id,aktif:e.aktif}),h(e),x(!0)},o=()=>{x(!1),h(null),c(""),N()},E=e=>{c(e),n("ongkir_id","")},I=e=>{e.preventDefault(),m?M(route("profil.alamat.update",m.id),{onSuccess:()=>{s.success("Alamat berhasil diperbarui"),o()},onError:()=>{s.error("Gagal memperbarui alamat")}}):K(route("profil.alamat.store"),{onSuccess:()=>{s.success("Alamat berhasil ditambahkan"),o()},onError:()=>{s.error("Gagal menambahkan alamat")}})},B=e=>{confirm("Apakah Anda yakin ingin menghapus alamat ini?")&&(f(e),w.delete(route("profil.alamat.destroy",e),{onSuccess:()=>{s.success("Alamat berhasil dihapus")},onError:()=>{s.error("Gagal menghapus alamat")},onFinish:()=>{f(null)}}))},F=e=>{w.post(route("profil.alamat.aktif",e),{},{onSuccess:()=>{s.success("Alamat utama berhasil diubah")},onError:()=>{s.error("Gagal mengubah alamat utama")}})},v=()=>l.ongkir_id?d.find(e=>e.value===l.ongkir_id):null;return a.jsxs(U,{children:[a.jsx(R,{title:"Alamat Saya - Angel Cake'S"}),a.jsx("section",{className:"pt-28 pb-12 px-4 min-h-screen",children:a.jsxs("div",{className:"container mx-auto max-w-4xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8 flex-wrap gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(G,{href:"/checkout",className:"btn btn-ghost btn-circle",children:a.jsx($,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[a.jsx(_,{className:"w-8 h-8 text-pink-500"}),"Alamat Saya"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Kelola alamat pengiriman"})]})]}),a.jsxs(p,{variant:"primary",onClick:k,children:[a.jsx(A,{className:"w-5 h-5 mr-2"}),"Tambah Alamat"]})]}),b.length>0?a.jsx("div",{className:"space-y-4",children:b.map(e=>a.jsx("div",{className:`bg-white rounded-2xl shadow-lg p-6 border-2 transition-all ${e.aktif?"border-pink-500":"border-transparent"} ${g===e.id?"opacity-50":""}`,children:a.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex-1 min-w-[200px]",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[a.jsx("span",{className:"font-bold text-lg",children:e.nama_pengguna}),e.aktif&&a.jsxs("span",{className:"badge badge-primary gap-1",children:[a.jsx(S,{className:"w-3 h-3"}),"Utama"]})]}),a.jsx("p",{className:"text-gray-600",children:e.nomor_telepon}),a.jsx("p",{className:"text-gray-700 mt-2",children:e.alamat}),a.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm flex-wrap",children:[a.jsx(q,{className:"w-4 h-4 text-gray-400"}),a.jsxs("span",{className:"text-gray-500",children:[e.ongkir.kecamatan," - ",e.ongkir.nama_desa]}),a.jsx("span",{className:"text-pink-500 font-semibold",children:u(e.ongkir.harga)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[!e.aktif&&a.jsxs("button",{onClick:()=>F(e.id),className:"btn btn-ghost btn-sm text-pink-500",children:[a.jsx(S,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Jadikan Utama"})]}),a.jsx("button",{onClick:()=>D(e),className:"btn btn-ghost btn-sm",children:a.jsx(H,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>B(e.id),className:"btn btn-ghost btn-sm text-red-500",disabled:g===e.id,children:a.jsx(J,{className:"w-4 h-4"})})]})]})},e.id))}):a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[a.jsx("div",{className:"w-24 h-24 mx-auto bg-gray-100 rounded-full flex items-center justify-center mb-6",children:a.jsx(_,{className:"w-12 h-12 text-gray-400"})}),a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Belum Ada Alamat"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"Tambahkan alamat pengiriman untuk melanjutkan checkout"}),a.jsxs(p,{variant:"primary",onClick:k,children:[a.jsx(A,{className:"w-5 h-5 mr-2"}),"Tambah Alamat"]})]})]})}),T&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[a.jsx("h2",{className:"text-xl font-bold",children:m?"Edit Alamat":"Tambah Alamat Baru"}),a.jsx("button",{onClick:o,className:"btn btn-ghost btn-circle btn-sm",children:a.jsx(z,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:I,className:"p-6 space-y-4",children:[a.jsx(y,{label:"Nama Penerima",name:"nama_pengguna",value:l.nama_pengguna,onChange:e=>n("nama_pengguna",e.target.value),placeholder:"Masukkan nama penerima",error:t.nama_pengguna,required:!0}),a.jsx(y,{label:"Nomor Telepon",name:"nomor_telepon",value:l.nomor_telepon,onChange:e=>n("nomor_telepon",e.target.value),placeholder:"Contoh: 081234567890",error:t.nomor_telepon,required:!0}),a.jsxs("div",{className:"form-control w-full",children:[a.jsx("label",{className:"label",children:a.jsxs("span",{className:"label-text font-semibold",children:["Kecamatan",a.jsx("span",{className:"text-error ml-1",children:"*"})]})}),a.jsxs("select",{value:r,onChange:e=>E(e.target.value),className:"select select-bordered w-full",children:[a.jsx("option",{value:"",children:"Pilih Kecamatan"}),C.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]})]}),a.jsxs("div",{className:"form-control w-full",children:[a.jsx("label",{className:"label",children:a.jsxs("span",{className:"label-text font-semibold",children:["Kelurahan/Desa",a.jsx("span",{className:"text-error ml-1",children:"*"})]})}),a.jsxs("select",{value:l.ongkir_id,onChange:e=>n("ongkir_id",e.target.value),className:`select select-bordered w-full ${t.ongkir_id?"select-error":""}`,disabled:!r,children:[a.jsx("option",{value:"",children:r?"Pilih Kelurahan/Desa":"Pilih Kecamatan terlebih dahulu"}),P.map(e=>a.jsxs("option",{value:e.value,children:[e.nama_desa," - ",u(e.harga)]},e.value))]}),t.ongkir_id&&a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text-alt text-error",children:t.ongkir_id})}),l.ongkir_id&&v()&&a.jsx("div",{className:"mt-2 p-3 bg-pink-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Ongkos Kirim:"}),a.jsx("span",{className:"font-bold text-pink-500",children:u(v().harga)})]})})]}),a.jsxs("div",{className:"form-control w-full",children:[a.jsx("label",{className:"label",children:a.jsxs("span",{className:"label-text font-semibold",children:["Alamat Lengkap",a.jsx("span",{className:"text-error ml-1",children:"*"})]})}),a.jsx("textarea",{value:l.alamat,onChange:e=>n("alamat",e.target.value),className:`textarea textarea-bordered w-full h-24 ${t.alamat?"textarea-error":""}`,placeholder:"Masukkan alamat lengkap (jalan, RT/RW, patokan, dll)"}),t.alamat&&a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text-alt text-error",children:t.alamat})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:l.aktif,onChange:e=>n("aktif",e.target.checked),className:"checkbox checkbox-primary",id:"aktif"}),a.jsx("label",{htmlFor:"aktif",className:"label-text cursor-pointer",children:"Jadikan alamat utama"})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:o,className:"btn btn-outline flex-1",children:"Batal"}),a.jsx(p,{type:"submit",variant:"primary",className:"flex-1",loading:j,disabled:j,children:m?"Simpan Perubahan":"Tambah Alamat"})]})]})]})})]})}export{oa as default};
