import{r as i,j as a,H as C,L as p,z as c,a as A}from"./app-DT32C7nY.js";import{U as P}from"./UserLayout-RTAU9vEL.js";import{B as g}from"./Button-DkoYT9R8.js";import{S as j}from"./shopping-bag-CK2gU9WT.js";import{C as S}from"./circle-alert-DWMPioR-.js";import{P as u}from"./plus-K_uxNSFF.js";import{M as _}from"./x-CHumAv0e.js";import{T as D}from"./truck-CQ-pxHod.js";import{C as T}from"./credit-card-Ai9vwC_Q.js";import"./cake-CAqAkV2S.js";import"./createLucideIcon-CMnZVN2_.js";import"./user-DeY8Ogeh.js";import"./phone-D3b-d1Th.js";import"./mail--kKUj2iP.js";function J({cartItems:N,userAddresses:m,activeAddress:b,hasAddress:f,subtotal:d,totalItems:o}){const[s,k]=i.useState(b?.id||null),[n,y]=i.useState(""),[r,x]=i.useState(!1),t=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),l=m.find(e=>e.id===s),h=l?.ongkir?.harga||0,v=d+h,w=()=>{if(!s){c.error("Pilih alamat pengiriman");return}x(!0),A.post(route("checkout.store"),{info_pengguna_id:s,catatan:n},{onSuccess:()=>{c.success("Pesanan berhasil dibuat!")},onError:e=>{c.error(e.error||"Gagal membuat pesanan")},onFinish:()=>{x(!1)}})};return a.jsxs(P,{children:[a.jsx(C,{title:"Checkout - Angel Cake'S"}),a.jsx("section",{className:"pt-28 pb-12 px-4 min-h-screen bg-gray-50",children:a.jsxs("div",{className:"container mx-auto max-w-6xl",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[a.jsx(j,{className:"w-8 h-8 text-pink-500"}),"Checkout"]}),a.jsxs("p",{className:"text-gray-600 mt-1",children:[o," item dalam pesanan"]})]}),f?a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx(_,{className:"w-5 h-5 text-pink-500"}),"Alamat Pengiriman"]}),a.jsx("div",{className:"space-y-3",children:m.map(e=>a.jsx("label",{className:`block p-4 rounded-xl border-2 cursor-pointer transition-all ${s===e.id?"border-pink-500 bg-pink-50":"border-gray-200 hover:border-pink-300"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("input",{type:"radio",name:"address",value:e.id,checked:s===e.id,onChange:()=>k(e.id),className:"radio radio-primary mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-bold",children:e.nama_pengguna}),e.aktif&&a.jsx("span",{className:"badge badge-primary badge-sm",children:"Utama"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.nomor_telepon}),a.jsx("p",{className:"text-sm text-gray-600",children:e.alamat}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm flex-wrap",children:[a.jsx(D,{className:"w-4 h-4 text-gray-400"}),a.jsxs("span",{className:"text-gray-500",children:[e.ongkir.kecamatan,e.ongkir.nama_desa&&` - ${e.ongkir.nama_desa}`]}),a.jsx("span",{className:"text-pink-500 font-semibold",children:t(e.ongkir.harga)})]})]})]})},e.id))}),a.jsxs(p,{href:"/profil/alamat",className:"btn btn-outline btn-sm mt-4 gap-2",children:[a.jsx(u,{className:"w-4 h-4"}),"Tambah Alamat Baru"]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx(j,{className:"w-5 h-5 text-pink-500"}),"Daftar Pesanan"]}),a.jsx("div",{className:"divide-y",children:N.map(e=>a.jsxs("div",{className:"flex gap-4 py-4 first:pt-0 last:pb-0",children:[a.jsx("img",{src:e.image,alt:e.name,className:"w-20 h-20 object-cover rounded-lg"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold line-clamp-2",children:e.name}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t(e.price)," x ",e.quantity]})]}),a.jsx("div",{className:"text-right",children:a.jsx("p",{className:"font-bold text-pink-500",children:t(e.subtotal)})})]},e.id))})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsx("h2",{className:"text-lg font-bold mb-4",children:"Catatan (Opsional)"}),a.jsx("textarea",{value:n,onChange:e=>y(e.target.value),placeholder:"Tambahkan catatan untuk pesanan Anda...",className:"textarea textarea-bordered w-full h-24",maxLength:500}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[n.length,"/500 karakter"]})]})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-28",children:[a.jsx("h2",{className:"text-lg font-bold mb-6",children:"Ringkasan Pembayaran"}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600",children:["Subtotal (",o," item)"]}),a.jsx("span",{className:"font-semibold",children:t(d)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Ongkos Kirim"}),a.jsx("span",{className:"font-semibold",children:l?t(h):"-"})]}),l&&a.jsxs("div",{className:"text-sm text-gray-500",children:["Pengiriman ke ",l.ongkir.kecamatan,l.ongkir.nama_desa&&` - ${l.ongkir.nama_desa}`]}),a.jsx("div",{className:"divider my-2"}),a.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[a.jsx("span",{children:"Total"}),a.jsx("span",{className:"text-pink-500",children:t(v)})]})]}),a.jsxs(g,{variant:"primary",className:"w-full",onClick:w,disabled:!s||r,loading:r,children:[a.jsx(T,{className:"w-5 h-5 mr-2"}),r?"Memproses...":"Buat Pesanan"]}),a.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Dengan membuat pesanan, Anda menyetujui syarat dan ketentuan yang berlaku"})]})})]}):a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(S,{className:"w-10 h-10 text-yellow-500"})}),a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Alamat Belum Tersedia"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Silakan tambahkan alamat pengiriman terlebih dahulu untuk melanjutkan checkout"}),a.jsx(p,{href:"/profil/alamat",children:a.jsxs(g,{variant:"primary",children:[a.jsx(u,{className:"w-5 h-5 mr-2"}),"Tambah Alamat"]})})]})]})})]})}export{J as default};
